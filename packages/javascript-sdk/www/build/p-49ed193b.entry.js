import{r as t,c as s,h as i}from"./p-05369654.js";import{u as e}from"./p-25dfbc9b.js";const c="";const h=c;const o=class{constructor(i){t(this,i);this.filtersUpdated=s(this,"filtersUpdated",7);this.searchStore=e.getState();this.handleFilterChange=(t,s)=>{if(s){this.selectedFilters.add(t)}else{this.selectedFilters.delete(t)}const i=Array.from(this.selectedFilters);const e=i.reduce(((t,s)=>{const[i,e]=s.split(":");if(!t[i]){t[i]={counts:{}}}t[i].counts[e]=1;return t}),{});this.filtersUpdated.emit(i);this.searchStore.setFacets(e);this.searchStore.search()};this.filters=[];this.selectedFilters=new Set;this.dynamicFilters=[]}connectedCallback(){this.unsubscribe=e.subscribe((t=>{var s;const i=(s=t.searchResults)===null||s===void 0?void 0:s.data.facets;if(i){this.populateFiltersFromFacets(i)}}))}disconnectedCallback(){if(this.unsubscribe){this.unsubscribe()}}populateFiltersFromFacets(t){const s=Object.entries(t).flatMap((([t,s])=>Object.entries(s.counts).map((([s,i])=>({label:`${t}: ${s} (${i})`,value:s})))));this.dynamicFilters=s}render(){const t=this.dynamicFilters.length>0?this.dynamicFilters:this.filters;return i("div",{key:"09b978503bef5758c0fc00b3b1a9e57131cb1374",class:"filters-list"},t.map((t=>i("label",{key:t.label},i("input",{type:"checkbox",value:t.value,onChange:s=>this.handleFilterChange(t.value,s.target.checked)}),t.label))))}};o.style=h;export{o as searchcraft_filters_list};
//# sourceMappingURL=p-49ed193b.entry.js.map