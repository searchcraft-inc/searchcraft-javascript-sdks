{"file":"searchcraft-toggle-button.entry.esm.js","mappings":";;;;AAAA,MAAM,gCAAgC,GAAG,qkBAAqkB;;MCQjmB,uBAAuB;;;QAa1B,gBAAW,GAAG,mBAAmB,CAAC,QAAQ,EAAE,CAAC;QAe7C,iBAAY,GAAG;YACrB,IAAI,CAAC,QAAQ,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC;YAE/B,IAAI,IAAI,CAAC,IAAI,KAAK,MAAM,EAAE;gBACxB,MAAM,IAAI,GAAG,IAAI,CAAC,QAAQ,GAAG,QAAQ,GAAG,OAAO,CAAC;gBAChD,IAAI,CAAC,WAAW,CAAC,eAAe,CAAC;oBAC/B,IAAI;iBACL,CAAC,CAAC;aACJ;iBAAM,IAAI,IAAI,CAAC,IAAI,KAAK,MAAM,EAAE;gBAC/B,MAAM,IAAI,GAAG,IAAI,CAAC,QAAQ,GAAG,MAAM,GAAG,KAAK,CAAC;gBAC5C,IAAI,CAAC,WAAW,CAAC,eAAe,CAAC;oBAC/B,IAAI;iBACL,CAAC,CAAC;aACJ;YAED,IAAI;gBACF,MAAM,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,CAAC;aACjC;YAAC,OAAO,KAAK,EAAE;gBACd,OAAO,CAAC,KAAK,CAAC,gBAAgB,EAAE,KAAK,CAAC,CAAC;aACxC;SACF,CAAC;oBA1C8B,MAAM;wBAElB,KAAK;qBACR,EAAE;4BACK,CAAC;;IAKzB,gBAAgB;QACd,IAAI,CAAC,WAAW,GAAG,mBAAmB,CAAC,SAAS,CAAC,CAAC,KAAK;;YACrD,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC,KAAK,IAAI,EAAE,CAAC;YAC/B,IAAI,CAAC,YAAY,GAAG,CAAA,MAAA,MAAA,MAAA,KAAK,CAAC,aAAa,0CAAE,IAAI,0CAAE,IAAI,0CAAE,MAAM,KAAI,CAAC,CAAC;SAClE,CAAC,CAAC;KACJ;IAED,oBAAoB;QAClB,IAAI,IAAI,CAAC,WAAW,EAAE;YACpB,IAAI,CAAC,WAAW,EAAE,CAAC;SACpB;KACF;IAwBD,MAAM;;QAEJ,IAAI,CAAC,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,YAAY,KAAK,CAAC,EAAE;YAC1C,OAAO,IAAI,CAAC;SACb;QAED,MAAM,KAAK,GACT,IAAI,CAAC,IAAI,KAAK,MAAM;cAChB,aAAa;cACb,IAAI,CAAC,IAAI,KAAK,MAAM;kBAClB,aAAa;kBACb,EAAE,CAAC;QAEX,QACE,WAAK,KAAK,EAAC,kBAAkB,IAC3B,gBAAO,KAAK,CAAQ,EACpB,cACE,KAAK,EAAE,kBAAkB,IAAI,CAAC,QAAQ,GAAG,QAAQ,GAAG,EAAE,EAAE,EACxD,OAAO,EAAE,IAAI,CAAC,YAAY,EAC1B,IAAI,EAAC,QAAQ,IAEb,WAAK,KAAK,EAAE,iBAAiB,IAAI,CAAC,QAAQ,GAAG,QAAQ,GAAG,EAAE,EAAE,GAAI,CACzD,CACL,EACN;KACH;;;;;;","names":[],"sources":["src/components/searchcraft-toggle-button/searchcraft-toggle-button.module.scss?tag=searchcraft-toggle-button&encapsulation=shadow","src/components/searchcraft-toggle-button/searchcraft-toggle-button.tsx"],"sourcesContent":[".toggle-container {\n  display: flex;\n  align-items: center;\n  font-size: 14px;\n  color: #333;\n}\n\n.toggle-wrapper {\n  box-shadow: 0px 0px 0px 1px rgba(0, 0, 0, 0.05);\n  margin-left: 10px;\n  border: none;\n  border-radius: 16px;\n  width: 44px;\n  height: 26px;\n  background: #ddd;\n  position: relative;\n  cursor: pointer;\n}\n\n.toggle-wrapper.active {\n  box-shadow: 0px 0px 0px 1px rgba(0, 0, 0, 0.05);\n  background: #007DB3;\n}\n\n.toggle-wrapper .toggle-switch {\n  width: 18px;\n  height: 18px;\n  background: #fff;\n  border-radius: 50%;\n  position: absolute;\n  top: calc(50% - 18px/2);\n  left: 4px;\n  transition: transform 0.3s ease;\n}\n\n.toggle-wrapper .toggle-switch.active {\n  transform: translateX(16px);\n}\n","import { Component, h, Prop, State } from '@stencil/core';\nimport { useSearchcraftStore } from '@provider/store';\n\n@Component({\n  tag: 'searchcraft-toggle-button',\n  styleUrl: 'searchcraft-toggle-button.module.scss',\n  shadow: true,\n})\nexport class SearchcraftToggleButton {\n  /**\n   * Type of the toggle - determines what it controls\n   * 'mode': toggles between 'fuzzy' and 'normal'\n   * 'sort': toggles between 'asc' and 'desc'\n   */\n  @Prop() type: 'mode' | 'sort' = 'mode';\n\n  @State() isActive = false;\n  @State() query = ''; // Track the query\n  @State() resultsCount = 0; // Track the count of search results\n\n  private unsubscribe: () => void;\n  private searchStore = useSearchcraftStore.getState();\n\n  componentDidLoad() {\n    this.unsubscribe = useSearchcraftStore.subscribe((state) => {\n      this.query = state.query || '';\n      this.resultsCount = state.searchResults?.data?.hits?.length || 0;\n    });\n  }\n\n  disconnectedCallback() {\n    if (this.unsubscribe) {\n      this.unsubscribe();\n    }\n  }\n\n  private handleToggle = async () => {\n    this.isActive = !this.isActive;\n\n    if (this.type === 'mode') {\n      const mode = this.isActive ? 'normal' : 'fuzzy';\n      this.searchStore.setSearchParams({\n        mode,\n      });\n    } else if (this.type === 'sort') {\n      const sort = this.isActive ? 'desc' : 'asc';\n      this.searchStore.setSearchParams({\n        sort,\n      });\n    }\n\n    try {\n      await this.searchStore.search();\n    } catch (error) {\n      console.error('Search failed:', error);\n    }\n  };\n\n  render() {\n    // Render only if there's a query and results exist\n    if (!this.query || this.resultsCount === 0) {\n      return null;\n    }\n\n    const label =\n      this.type === 'mode'\n        ? 'Exact Match'\n        : this.type === 'sort'\n          ? 'Most Recent'\n          : '';\n\n    return (\n      <div class='toggle-container'>\n        <span>{label}</span>\n        <button\n          class={`toggle-wrapper ${this.isActive ? 'active' : ''}`}\n          onClick={this.handleToggle}\n          type='button'\n        >\n          <div class={`toggle-switch ${this.isActive ? 'active' : ''}`} />\n        </button>\n      </div>\n    );\n  }\n}\n"],"version":3}